<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquiteturas Java Spring Boot - Guia Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .architecture-section {
            margin-bottom: 60px;
            border-left: 5px solid #667eea;
            padding-left: 30px;
        }

        .arch-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .arch-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .arch-title {
            font-size: 2em;
            color: #2d3748;
        }

        .concept {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid #667eea;
        }

        .concept h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .tree-structure {
            background: #1a202c;
            color: #a0aec0;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tree-structure pre {
            margin: 0;
            white-space: pre;
        }

        .tree-line {
            margin: 3px 0;
        }

        .tree-folder {
            color: #81e6d9;
            font-weight: bold;
        }

        .tree-file {
            color: #90cdf4;
        }

        .tree-comment {
            color: #68d391;
            font-style: italic;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .info-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-top: 4px solid #667eea;
        }

        .info-card h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
        }

        .info-card h4::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            margin-right: 10px;
        }

        .info-card ul {
            list-style: none;
            padding-left: 0;
        }

        .info-card li {
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .info-card li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        .pros {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 20px;
            border-radius: 10px;
        }

        .cons {
            background: #fff5f5;
            border-left: 4px solid #f56565;
            padding: 20px;
            border-radius: 10px;
        }

        .pros h4, .cons h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .pros h4 {
            color: #2f855a;
        }

        .cons h4 {
            color: #c53030;
        }

        .when-use {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .when-use h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table tr:hover {
            background: #f7fafc;
        }

        footer {
            background: #2d3748;
            color: white;
            padding: 30px;
            text-align: center;
        }

        footer p {
            margin: 5px 0;
        }

        .highlight {
            background: #fef5e7;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #d68910;
        }

        @media (max-width: 768px) {
            .pros-cons {
                grid-template-columns: 1fr;
            }
            
            .arch-title {
                font-size: 1.5em;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“˜ Arquiteturas de Software</h1>
            <p>Java + Spring Boot - Guia Completo com Exemplos</p>
        </header>

        <div class="content">
            <!-- ARQUITETURA 1 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">1</div>
                    <h2 class="arch-title">Arquitetura em Camadas (Layered)</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>Arquitetura clÃ¡ssica muito utilizada em projetos <span class="highlight">Spring Boot CRUD</span>, baseada em camadas tÃ©cnicas. Simples e direta, ideal para aplicaÃ§Ãµes que nÃ£o exigem alta complexidade.</p>
                </div>

                <h3>ğŸ“‚ Estrutura de Pacotes Completa</h3>
                <div class="tree-structure">
                    <pre>
com.example.demo
â”œâ”€â”€ controller
â”‚   â”œâ”€â”€ UserController.java          <span class="tree-comment">// @RestController - Endpoints REST</span>
â”‚   â””â”€â”€ ProductController.java       <span class="tree-comment">// Controllers de API</span>
â”‚
â”œâ”€â”€ service
â”‚   â”œâ”€â”€ UserService.java             <span class="tree-comment">// @Service - Regras de negÃ³cio</span>
â”‚   â”œâ”€â”€ ProductService.java          <span class="tree-comment">// LÃ³gica de aplicaÃ§Ã£o</span>
â”‚   â””â”€â”€ EmailService.java            <span class="tree-comment">// ServiÃ§os auxiliares</span>
â”‚
â”œâ”€â”€ repository
â”‚   â”œâ”€â”€ UserRepository.java          <span class="tree-comment">// extends JpaRepository - Acesso a dados</span>
â”‚   â””â”€â”€ ProductRepository.java       <span class="tree-comment">// Queries de banco de dados</span>
â”‚
â”œâ”€â”€ model
â”‚   â”œâ”€â”€ entity
â”‚   â”‚   â”œâ”€â”€ User.java                <span class="tree-comment">// @Entity - Entidade JPA</span>
â”‚   â”‚   â””â”€â”€ Product.java             <span class="tree-comment">// Mapeamento de tabelas</span>
â”‚   â”‚
â”‚   â””â”€â”€ dto
â”‚       â”œâ”€â”€ UserDTO.java             <span class="tree-comment">// Data Transfer Object - Request/Response</span>
â”‚       â””â”€â”€ ProductDTO.java          <span class="tree-comment">// Objetos de transferÃªncia</span>
â”‚
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ SecurityConfig.java          <span class="tree-comment">// @Configuration - ConfiguraÃ§Ã£o Spring Security</span>
â”‚   â””â”€â”€ OpenApiConfig.java           <span class="tree-comment">// ConfiguraÃ§Ã£o Swagger/OpenAPI</span>
â”‚
â””â”€â”€ exception
    â”œâ”€â”€ GlobalExceptionHandler.java  <span class="tree-comment">// @RestControllerAdvice - Tratamento global</span>
    â””â”€â”€ ResourceNotFoundException.java <span class="tree-comment">// ExceÃ§Ãµes customizadas</span>
                    </pre>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>ğŸ§  Responsabilidades</h4>
                        <ul>
                            <li><strong>Controller:</strong> Recebe requisiÃ§Ãµes HTTP</li>
                            <li><strong>Service:</strong> Implementa lÃ³gica de negÃ³cio</li>
                            <li><strong>Repository:</strong> Acessa o banco de dados</li>
                            <li><strong>Model:</strong> Define estrutura de dados</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h4>ğŸ“„ Tipos de Classes</h4>
                        <ul>
                            <li>Controllers REST (@RestController)</li>
                            <li>Services (@Service)</li>
                            <li>RepositÃ³rios (JpaRepository)</li>
                            <li>Entidades (@Entity)</li>
                            <li>DTOs (Plain Java Objects)</li>
                        </ul>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>Simples de implementar</li>
                            <li>Curva de aprendizado baixa</li>
                            <li>Ideal para CRUD bÃ¡sico</li>
                            <li>Amplamente conhecida</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Alto acoplamento ao Spring</li>
                            <li>DifÃ­cil de testar isoladamente</li>
                            <li>NÃ£o escala bem</li>
                            <li>DomÃ­nio dependente de infraestrutura</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>Projetos pequenos e mÃ©dios</li>
                        <li>CRUD administrativo</li>
                        <li>MVP e protÃ³tipos</li>
                        <li>Times com pouca experiÃªncia</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 2 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">2</div>
                    <h2 class="arch-title">MVC com Spring Boot</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>SeparaÃ§Ã£o entre <span class="highlight">Model, View e Controller</span>, geralmente com Thymeleaf para renderizaÃ§Ã£o server-side. Ideal para aplicaÃ§Ãµes web tradicionais.</p>
                </div>

                <h3>ğŸ“‚ Estrutura de Pacotes Completa</h3>
                <div class="tree-structure">
                    <pre>
com.example.mvc
â”œâ”€â”€ controller
â”‚   â”œâ”€â”€ HomeController.java          <span class="tree-comment">// @Controller - Retorna views HTML</span>
â”‚   â”œâ”€â”€ UserController.java          <span class="tree-comment">// Controla fluxo de pÃ¡ginas</span>
â”‚   â””â”€â”€ ProductController.java       <span class="tree-comment">// CRUD com views</span>
â”‚
â”œâ”€â”€ model
â”‚   â”œâ”€â”€ User.java                    <span class="tree-comment">// @Entity - Modelo de dados</span>
â”‚   â”œâ”€â”€ Product.java                 <span class="tree-comment">// Entidades do sistema</span>
â”‚   â””â”€â”€ dto
â”‚       â””â”€â”€ UserFormDTO.java         <span class="tree-comment">// FormulÃ¡rios HTML</span>
â”‚
â”œâ”€â”€ repository
â”‚   â”œâ”€â”€ UserRepository.java          <span class="tree-comment">// extends JpaRepository</span>
â”‚   â””â”€â”€ ProductRepository.java       <span class="tree-comment">// Acesso a dados</span>
â”‚
â”œâ”€â”€ service
â”‚   â”œâ”€â”€ UserService.java             <span class="tree-comment">// @Service - LÃ³gica de negÃ³cio</span>
â”‚   â””â”€â”€ ProductService.java          <span class="tree-comment">// Processamento de dados</span>
â”‚
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ WebMvcConfig.java            <span class="tree-comment">// @Configuration - ConfiguraÃ§Ã£o MVC</span>
â”‚   â””â”€â”€ ThymeleafConfig.java         <span class="tree-comment">// ConfiguraÃ§Ã£o de templates</span>
â”‚
â””â”€â”€ resources
    â”œâ”€â”€ templates                    <span class="tree-comment">// Views Thymeleaf</span>
    â”‚   â”œâ”€â”€ index.html               <span class="tree-comment">// PÃ¡gina inicial</span>
    â”‚   â”œâ”€â”€ users
    â”‚   â”‚   â”œâ”€â”€ list.html            <span class="tree-comment">// Listagem de usuÃ¡rios</span>
    â”‚   â”‚   â””â”€â”€ form.html            <span class="tree-comment">// FormulÃ¡rio de cadastro</span>
    â”‚   â””â”€â”€ products
    â”‚       â”œâ”€â”€ list.html            <span class="tree-comment">// Listagem de produtos</span>
    â”‚       â””â”€â”€ detail.html          <span class="tree-comment">// Detalhes do produto</span>
    â”‚
    â””â”€â”€ static                       <span class="tree-comment">// Arquivos estÃ¡ticos</span>
        â”œâ”€â”€ css
        â”‚   â””â”€â”€ style.css            <span class="tree-comment">// Estilos CSS</span>
        â”œâ”€â”€ js
        â”‚   â””â”€â”€ app.js               <span class="tree-comment">// JavaScript</span>
        â””â”€â”€ images                   <span class="tree-comment">// Imagens</span>
                    </pre>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>Boa separaÃ§Ã£o de responsabilidades</li>
                            <li>Ideal para monolitos web</li>
                            <li>SEO-friendly (server-side rendering)</li>
                            <li>Menor complexidade frontend</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Pouco usado para APIs REST</li>
                            <li>Forte acoplamento</li>
                            <li>DifÃ­cil criar SPA moderna</li>
                            <li>Menos flexÃ­vel que APIs</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>Sistemas web tradicionais</li>
                        <li>Portais administrativos</li>
                        <li>E-commerce server-side</li>
                        <li>Quando SEO Ã© prioridade</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 3 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">3</div>
                    <h2 class="arch-title">Package by Feature</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>OrganizaÃ§Ã£o por <span class="highlight">casos de uso</span> e funcionalidades, muito comum em projetos Spring modernos. Alta coesÃ£o e fÃ¡cil navegaÃ§Ã£o no cÃ³digo.</p>
                </div>

                <h3>ğŸ“‚ Estrutura de Pacotes Completa</h3>
                <div class="tree-structure">
                    <pre>
com.example.app
â”œâ”€â”€ order
â”‚   â”œâ”€â”€ OrderController.java         <span class="tree-comment">// @RestController - API de pedidos</span>
â”‚   â”œâ”€â”€ OrderService.java            <span class="tree-comment">// @Service - LÃ³gica de pedidos</span>
â”‚   â”œâ”€â”€ OrderRepository.java         <span class="tree-comment">// extends JpaRepository</span>
â”‚   â”œâ”€â”€ Order.java                   <span class="tree-comment">// @Entity - Entidade Pedido</span>
â”‚   â”œâ”€â”€ OrderDTO.java                <span class="tree-comment">// DTO de pedido</span>
â”‚   â””â”€â”€ OrderStatus.java             <span class="tree-comment">// Enum - Status do pedido</span>
â”‚
â”œâ”€â”€ payment
â”‚   â”œâ”€â”€ PaymentController.java       <span class="tree-comment">// @RestController - API de pagamentos</span>
â”‚   â”œâ”€â”€ PaymentService.java          <span class="tree-comment">// @Service - Processamento de pagamento</span>
â”‚   â”œâ”€â”€ PaymentRepository.java       <span class="tree-comment">// extends JpaRepository</span>
â”‚   â”œâ”€â”€ Payment.java                 <span class="tree-comment">// @Entity - Entidade Pagamento</span>
â”‚   â”œâ”€â”€ PaymentDTO.java              <span class="tree-comment">// DTO de pagamento</span>
â”‚   â””â”€â”€ PaymentGateway.java          <span class="tree-comment">// Interface - Gateway de pagamento</span>
â”‚
â”œâ”€â”€ customer
â”‚   â”œâ”€â”€ CustomerController.java      <span class="tree-comment">// @RestController - API de clientes</span>
â”‚   â”œâ”€â”€ CustomerService.java         <span class="tree-comment">// @Service - GestÃ£o de clientes</span>
â”‚   â”œâ”€â”€ CustomerRepository.java      <span class="tree-comment">// extends JpaRepository</span>
â”‚   â”œâ”€â”€ Customer.java                <span class="tree-comment">// @Entity - Entidade Cliente</span>
â”‚   â””â”€â”€ CustomerDTO.java             <span class="tree-comment">// DTO de cliente</span>
â”‚
â”œâ”€â”€ inventory
â”‚   â”œâ”€â”€ InventoryController.java     <span class="tree-comment">// @RestController - API de estoque</span>
â”‚   â”œâ”€â”€ InventoryService.java        <span class="tree-comment">// @Service - Controle de estoque</span>
â”‚   â”œâ”€â”€ InventoryRepository.java     <span class="tree-comment">// extends JpaRepository</span>
â”‚   â”œâ”€â”€ Inventory.java               <span class="tree-comment">// @Entity - Entidade Estoque</span>
â”‚   â””â”€â”€ InventoryDTO.java            <span class="tree-comment">// DTO de estoque</span>
â”‚
â”œâ”€â”€ common
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java      <span class="tree-comment">// @Configuration - SeguranÃ§a global</span>
â”‚   â”‚   â””â”€â”€ DatabaseConfig.java      <span class="tree-comment">// ConfiguraÃ§Ã£o de banco</span>
â”‚   â”‚
â”‚   â””â”€â”€ exception
â”‚       â”œâ”€â”€ GlobalExceptionHandler.java  <span class="tree-comment">// @RestControllerAdvice</span>
â”‚       â””â”€â”€ BusinessException.java       <span class="tree-comment">// ExceÃ§Ã£o de negÃ³cio</span>
â”‚
â””â”€â”€ Application.java                 <span class="tree-comment">// @SpringBootApplication - Classe principal</span>
                    </pre>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>Alta coesÃ£o funcional</li>
                            <li>FÃ¡cil navegaÃ§Ã£o no cÃ³digo</li>
                            <li>Times podem trabalhar em features isoladas</li>
                            <li>Facilita microsserviÃ§os futuros</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>DomÃ­nio ainda depende de Spring</li>
                            <li>Pode haver duplicaÃ§Ã£o de cÃ³digo</li>
                            <li>DifÃ­cil compartilhar lÃ³gica comum</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>Projetos mÃ©dios a grandes</li>
                        <li>Times pequenos trabalhando em paralelo</li>
                        <li>Quando features sÃ£o bem definidas</li>
                        <li>PreparaÃ§Ã£o para microsserviÃ§os</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 4 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">4</div>
                    <h2 class="arch-title">Clean Architecture</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>Protege o <span class="highlight">domÃ­nio</span> e isola o Spring nas bordas. Testabilidade mÃ¡xima e baixo acoplamento. Ideal para sistemas complexos e microsserviÃ§os.</p>
                </div>

                <h3>ğŸ“‚ Estrutura de Pacotes Completa</h3>
                <div class="tree-structure">
                    <pre>
com.example.clean
â”œâ”€â”€ domain
â”‚   â”œâ”€â”€ model
â”‚   â”‚   â”œâ”€â”€ Order.java               <span class="tree-comment">// POJO - Entidade de domÃ­nio pura</span>
â”‚   â”‚   â”œâ”€â”€ Payment.java             <span class="tree-comment">// Sem anotaÃ§Ãµes Spring</span>
â”‚   â”‚   â””â”€â”€ Customer.java            <span class="tree-comment">// LÃ³gica de negÃ³cio pura</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ event
â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java   <span class="tree-comment">// Evento de domÃ­nio</span>
â”‚   â”‚   â””â”€â”€ PaymentProcessedEvent.java <span class="tree-comment">// Eventos puros</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ exception
â”‚   â”‚   â”œâ”€â”€ OrderNotFoundException.java <span class="tree-comment">// ExceÃ§Ã£o de domÃ­nio</span>
â”‚   â”‚   â””â”€â”€ InsufficientStockException.java <span class="tree-comment">// Regras de negÃ³cio</span>
â”‚   â”‚
â”‚   â””â”€â”€ validation
â”‚       â””â”€â”€ OrderValidator.java      <span class="tree-comment">// ValidaÃ§Ãµes de domÃ­nio</span>
â”‚
â”œâ”€â”€ application
â”‚   â””â”€â”€ usecase
â”‚       â”œâ”€â”€ CreateOrderUseCase.java  <span class="tree-comment">// Caso de uso - Criar pedido</span>
â”‚       â”œâ”€â”€ ProcessPaymentUseCase.java <span class="tree-comment">// Orquestra operaÃ§Ãµes</span>
â”‚       â””â”€â”€ CancelOrderUseCase.java  <span class="tree-comment">// LÃ³gica de aplicaÃ§Ã£o</span>
â”‚
â”œâ”€â”€ port
â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”œâ”€â”€ CreateOrderPort.java     <span class="tree-comment">// Interface - Entrada para criar pedido</span>
â”‚   â”‚   â”œâ”€â”€ ProcessPaymentPort.java  <span class="tree-comment">// Contrato de entrada</span>
â”‚   â”‚   â””â”€â”€ QueryOrderPort.java      <span class="tree-comment">// Consultas</span>
â”‚   â”‚
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ OrderRepositoryPort.java <span class="tree-comment">// Interface - SaÃ­da para persistÃªncia</span>
â”‚       â”œâ”€â”€ PaymentGatewayPort.java  <span class="tree-comment">// Gateway externo</span>
â”‚       â”œâ”€â”€ EventPublisherPort.java  <span class="tree-comment">// PublicaÃ§Ã£o de eventos</span>
â”‚       â””â”€â”€ NotificationPort.java    <span class="tree-comment">// NotificaÃ§Ãµes</span>
â”‚
â”œâ”€â”€ adapter
â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”œâ”€â”€ web
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java <span class="tree-comment">// @RestController - Adaptador REST</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentController.java <span class="tree-comment">// Endpoints HTTP</span>
â”‚   â”‚   â”‚   â””â”€â”€ dto
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderRequest.java <span class="tree-comment">// Request DTO</span>
â”‚   â”‚   â”‚       â””â”€â”€ OrderResponse.java <span class="tree-comment">// Response DTO</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ kafka
â”‚   â”‚       â”œâ”€â”€ OrderEventConsumer.java <span class="tree-comment">// @KafkaListener - Consumidor Kafka</span>
â”‚   â”‚       â””â”€â”€ PaymentEventConsumer.java <span class="tree-comment">// Listener de eventos</span>
â”‚   â”‚
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ persistence
â”‚       â”‚   â”œâ”€â”€ OrderJpaAdapter.java <span class="tree-comment">// Implementa OrderRepositoryPort</span>
â”‚       â”‚   â”œâ”€â”€ PaymentJpaAdapter.java <span class="tree-comment">// Adaptador JPA</span>
â”‚       â”‚   â”œâ”€â”€ entity
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderEntity.java <span class="tree-comment">// @Entity - Entidade JPA</span>
â”‚       â”‚   â”‚   â””â”€â”€ PaymentEntity.java <span class="tree-comment">// Mapeamento de tabela</span>
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ repository
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderJpaRepository.java <span class="tree-comment">// extends JpaRepository</span>
â”‚       â”‚   â”‚   â””â”€â”€ PaymentJpaRepository.java <span class="tree-comment">// Spring Data JPA</span>
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ mapper
â”‚       â”‚       â”œâ”€â”€ OrderMapper.java <span class="tree-comment">// Converte Entity â†” Domain</span>
â”‚       â”‚       â””â”€â”€ PaymentMapper.java <span class="tree-comment">// Mapeamento de dados</span>
â”‚       â”‚
â”‚       â”œâ”€â”€ kafka
â”‚       â”‚   â”œâ”€â”€ OrderEventPublisher.java <span class="tree-comment">// Implementa EventPublisherPort</span>
â”‚       â”‚   â”œâ”€â”€ KafkaProducerAdapter.java <span class="tree-comment">// Publica eventos no Kafka</span>
â”‚       â”‚   â””â”€â”€ dto
â”‚       â”‚       â””â”€â”€ OrderEventDTO.java <span class="tree-comment">// DTO para Kafka</span>
â”‚       â”‚
â”‚       â””â”€â”€ external
â”‚           â”œâ”€â”€ StripePaymentAdapter.java <span class="tree-comment">// Implementa PaymentGatewayPort</span>
â”‚           â””â”€â”€ EmailNotificationAdapter.java <span class="tree-comment">// Adaptador de email</span>
â”‚
â””â”€â”€ config
    â”œâ”€â”€ kafka
    â”‚   â”œâ”€â”€ KafkaConfig.java         <span class="tree-comment">// @Configuration - Config principal Kafka</span>
    â”‚   â””â”€â”€ KafkaTopicConfig.java    <span class="tree-comment">// CriaÃ§Ã£o de tÃ³picos</span>
    â”‚
    â”œâ”€â”€ database
    â”‚   â””â”€â”€ DatabaseConfig.java      <span class="tree-comment">// @Configuration - ConfiguraÃ§Ã£o de DB</span>
    â”‚
    â”œâ”€â”€ security
    â”‚   â””â”€â”€ SecurityConfig.java      <span class="tree-comment">// @Configuration - Spring Security</span>
    â”‚
    â”œâ”€â”€ exception
    â”‚   â””â”€â”€ GlobalExceptionHandler.java <span class="tree-comment">// @RestControllerAdvice - Tratamento global</span>
    â”‚
    â””â”€â”€ BeanConfiguration.java       <span class="tree-comment">// @Configuration - InjeÃ§Ã£o de dependÃªncias</span>
                    </pre>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>ğŸ§  Responsabilidades</h4>
                        <ul>
                            <li><strong>Domain:</strong> Regras de negÃ³cio puras</li>
                            <li><strong>Application:</strong> OrquestraÃ§Ã£o de casos de uso</li>
                            <li><strong>Port:</strong> Contratos de entrada/saÃ­da</li>
                            <li><strong>Adapter:</strong> ImplementaÃ§Ã£o tÃ©cnica</li>
                            <li><strong>Config:</strong> ConfiguraÃ§Ãµes Spring</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h4>ğŸ“„ Fluxo de DependÃªncias</h4>
                        <ul>
                            <li>Domain nÃ£o depende de nada</li>
                            <li>Application depende de Domain e Port</li>
                            <li>Adapter implementa Port</li>
                            <li>Config conecta tudo</li>
                        </ul>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>Alta testabilidade (domÃ­nio isolado)</li>
                            <li>BaixÃ­ssimo acoplamento</li>
                            <li>Ideal para microsserviÃ§os</li>
                            <li>FÃ¡cil trocar tecnologias</li>
                            <li>DomÃ­nio protegido</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Mais cÃ³digo inicial (boilerplate)</li>
                            <li>Curva de aprendizado maior</li>
                            <li>Over-engineering para apps simples</li>
                            <li>Necessita disciplina da equipe</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>MicrosserviÃ§os complexos</li>
                        <li>Sistemas com Kafka e eventos</li>
                        <li>Sistemas crÃ­ticos de negÃ³cio</li>
                        <li>Quando testabilidade Ã© prioridade</li>
                        <li>Projetos de longa duraÃ§Ã£o</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 5 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">5</div>
                    <h2 class="arch-title">Arquitetura Hexagonal (Ports & Adapters)</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>VariaÃ§Ã£o da Clean Architecture focada em <span class="highlight">entradas e saÃ­das plugÃ¡veis</span>. O core da aplicaÃ§Ã£o Ã© completamente isolado da infraestrutura, permitindo trocar tecnologias sem afetar o domÃ­nio.</p>
                </div>

                <h3>ğŸ“‚ Estrutura de Pacotes Completa</h3>
                <div class="tree-structure">
                    <pre>
com.example.hexagonal
â”œâ”€â”€ core
â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”œâ”€â”€ model
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java           <span class="tree-comment">// Entidade de domÃ­nio pura</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Product.java         <span class="tree-comment">// Agregado raiz</span>
â”‚   â”‚   â”‚   â””â”€â”€ Customer.java        <span class="tree-comment">// Value Objects e Entities</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ service
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderService.java    <span class="tree-comment">// LÃ³gica de domÃ­nio</span>
â”‚   â”‚   â”‚   â””â”€â”€ PricingService.java  <span class="tree-comment">// CÃ¡lculos de negÃ³cio</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ exception
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderException.java  <span class="tree-comment">// ExceÃ§Ãµes de domÃ­nio</span>
â”‚   â”‚   â”‚   â””â”€â”€ ValidationException.java <span class="tree-comment">// ValidaÃ§Ãµes de negÃ³cio</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ event
â”‚   â”‚       â”œâ”€â”€ OrderCreated.java    <span class="tree-comment">// Evento de domÃ­nio</span>
â”‚   â”‚       â””â”€â”€ PaymentCompleted.java <span class="tree-comment">// Domain events</span>
â”‚   â”‚
â”‚   â””â”€â”€ port
â”‚       â”œâ”€â”€ in
â”‚       â”‚   â”œâ”€â”€ CreateOrderUseCase.java <span class="tree-comment">// Interface - Caso de uso de entrada</span>
â”‚       â”‚   â”œâ”€â”€ CancelOrderUseCase.java <span class="tree-comment">// Driving port (quem chama o core)</span>
â”‚       â”‚   â”œâ”€â”€ GetOrderUseCase.java    <span class="tree-comment">// Query use case</span>
â”‚       â”‚   â””â”€â”€ ProcessPaymentUseCase.java <span class="tree-comment">// Command use case</span>
â”‚       â”‚
â”‚       â””â”€â”€ out
â”‚           â”œâ”€â”€ OrderRepository.java     <span class="tree-comment">// Interface - Porta de persistÃªncia</span>
â”‚           â”œâ”€â”€ PaymentGateway.java     <span class="tree-comment">// Driven port (chamado pelo core)</span>
â”‚           â”œâ”€â”€ EventPublisher.java     <span class="tree-comment">// Porta de eventos</span>
â”‚           â”œâ”€â”€ NotificationService.java <span class="tree-comment">// Porta de notificaÃ§Ã£o</span>
â”‚           â””â”€â”€ StockService.java       <span class="tree-comment">// Porta de estoque externo</span>
â”‚
â”œâ”€â”€ adapter
â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”œâ”€â”€ rest
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderRestAdapter.java    <span class="tree-comment">// @RestController - Adaptador REST</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentRestAdapter.java  <span class="tree-comment">// API HTTP de entrada</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ dto
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderRequest.java <span class="tree-comment">// DTO de request</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderResponse.java      <span class="tree-comment">// DTO de response</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ErrorResponse.java      <span class="tree-comment">// Resposta de erro</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ mapper
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderRestMapper.java    <span class="tree-comment">// Converte DTO â†” Domain</span>
â”‚   â”‚   â”‚       â””â”€â”€ PaymentRestMapper.java  <span class="tree-comment">// Mapeamento REST</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ kafka
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEventListener.java     <span class="tree-comment">// @KafkaListener - Consumidor Kafka</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentEventListener.java   <span class="tree-comment">// Adaptador de entrada via eventos</span>
â”‚   â”‚   â”‚   â””â”€â”€ dto
â”‚   â”‚   â”‚       â””â”€â”€ OrderEventDTO.java      <span class="tree-comment">// DTO para mensageria</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ scheduler
â”‚   â”‚       â””â”€â”€ OrderCleanupScheduler.java  <span class="tree-comment">// @Scheduled - Tarefas agendadas</span>
â”‚   â”‚
â”‚   â””â”€â”€ out
â”‚       â”œâ”€â”€ persistence
â”‚       â”‚   â”œâ”€â”€ OrderPersistenceAdapter.java <span class="tree-comment">// Implementa OrderRepository</span>
â”‚       â”‚   â”œâ”€â”€ CustomerPersistenceAdapter.java <span class="tree-comment">// Adaptador JPA</span>
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ entity
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderJpaEntity.java     <span class="tree-comment">// @Entity - Entidade JPA</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ CustomerJpaEntity.java  <span class="tree-comment">// Tabelas de banco</span>
â”‚       â”‚   â”‚   â””â”€â”€ OrderItemJpaEntity.java <span class="tree-comment">// Relacionamentos</span>
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ repository
â”‚       â”‚   â”‚   â”œâ”€â”€ OrderJpaRepository.java <span class="tree-comment">// extends JpaRepository</span>
â”‚       â”‚   â”‚   â””â”€â”€ CustomerJpaRepository.java <span class="tree-comment">// Spring Data</span>
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ mapper
â”‚       â”‚       â”œâ”€â”€ OrderPersistenceMapper.java <span class="tree-comment">// Entity â†” Domain</span>
â”‚       â”‚       â””â”€â”€ CustomerPersistenceMapper.java <span class="tree-comment">// ConversÃ£o de dados</span>
â”‚       â”‚
â”‚       â”œâ”€â”€ messaging
â”‚       â”‚   â”œâ”€â”€ KafkaEventPublisher.java    <span class="tree-comment">// Implementa EventPublisher</span>
â”‚       â”‚   â”œâ”€â”€ OrderEventProducer.java     <span class="tree-comment">// @Component - Producer Kafka</span>
â”‚       â”‚   â””â”€â”€ dto
â”‚       â”‚       â””â”€â”€ OrderEventMessage.java  <span class="tree-comment">// Mensagem Kafka</span>
â”‚       â”‚
â”‚       â”œâ”€â”€ external
â”‚       â”‚   â”œâ”€â”€ StripePaymentAdapter.java   <span class="tree-comment">// Implementa PaymentGateway</span>
â”‚       â”‚   â”œâ”€â”€ SendGridNotificationAdapter.java <span class="tree-comment">// ServiÃ§o de email</span>
â”‚       â”‚   â”œâ”€â”€ StockApiAdapter.java        <span class="tree-comment">// API externa de estoque</span>
â”‚       â”‚   â””â”€â”€ dto
â”‚       â”‚       â”œâ”€â”€ StripePaymentRequest.java <span class="tree-comment">// DTO para API externa</span>
â”‚       â”‚       â””â”€â”€ StockCheckResponse.java   <span class="tree-comment">// Response de estoque</span>
â”‚       â”‚
â”‚       â””â”€â”€ cache
â”‚           â””â”€â”€ RedisCacheAdapter.java      <span class="tree-comment">// @Component - Cache Redis</span>
â”‚
â””â”€â”€ config
    â”œâ”€â”€ UseCaseâ€‹Configuration.java       <span class="tree-comment">// @Configuration - Beans de casos de uso</span>
    â”œâ”€â”€ kafka
    â”‚   â”œâ”€â”€ KafkaProducerConfig.java    <span class="tree-comment">// ConfiguraÃ§Ã£o Producer Kafka</span>
    â”‚   â”œâ”€â”€ KafkaConsumerConfig.java    <span class="tree-comment">// ConfiguraÃ§Ã£o Consumer Kafka</span>
    â”‚   â””â”€â”€ KafkaTopicConfig.java       <span class="tree-comment">// CriaÃ§Ã£o de tÃ³picos</span>
    â”‚
    â”œâ”€â”€ database
    â”‚   â”œâ”€â”€ JpaConfig.java              <span class="tree-comment">// ConfiguraÃ§Ã£o JPA</span>
    â”‚   â””â”€â”€ DataSourceConfig.java       <span class="tree-comment">// ConfiguraÃ§Ã£o de conexÃ£o</span>
    â”‚
    â”œâ”€â”€ security
    â”‚   â””â”€â”€ SecurityConfig.java         <span class="tree-comment">// @EnableWebSecurity - SeguranÃ§a</span>
    â”‚
    â”œâ”€â”€ swagger
    â”‚   â””â”€â”€ OpenApiConfig.java          <span class="tree-comment">// DocumentaÃ§Ã£o API</span>
    â”‚
    â””â”€â”€ exception
        â””â”€â”€ GlobalExceptionHandler.java <span class="tree-comment">// @RestControllerAdvice - Tratamento global</span>
                    </pre>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>ğŸ§  Conceitos Chave</h4>
                        <ul>
                            <li><strong>Core:</strong> DomÃ­nio isolado (hexÃ¡gono)</li>
                            <li><strong>Port In:</strong> Driving (quem usa o core)</li>
                            <li><strong>Port Out:</strong> Driven (usado pelo core)</li>
                            <li><strong>Adapter:</strong> ImplementaÃ§Ã£o tÃ©cnica</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h4>ğŸ“„ Regra de DependÃªncias</h4>
                        <ul>
                            <li>Core nÃ£o conhece Adapters</li>
                            <li>Adapters conhecem Ports</li>
                            <li>Ports In chamam o Core</li>
                            <li>Core chama Ports Out</li>
                        </ul>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>DomÃ­nio completamente independente</li>
                            <li>FÃ¡cil trocar tecnologias (DB, Kafka, etc)</li>
                            <li>Testes unitÃ¡rios extremamente fÃ¡ceis</li>
                            <li>MÃºltiplos adaptadores simultÃ¢neos</li>
                            <li>Ideal para integraÃ§Ãµes complexas</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Estrutura mais complexa</li>
                            <li>Mais interfaces e mappers</li>
                            <li>Over-engineering para CRUD simples</li>
                            <li>Requer experiÃªncia da equipe</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>Sistemas com mÃºltiplas integraÃ§Ãµes (Kafka, APIs, etc)</li>
                        <li>Quando precisar trocar tecnologias frequentemente</li>
                        <li>MicrosserviÃ§os com regras de negÃ³cio complexas</li>
                        <li>Sistemas crÃ­ticos que exigem alta testabilidade</li>
                        <li>MÃºltiplos canais de entrada (REST, Kafka, gRPC)</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 6 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">6</div>
                    <h2 class="arch-title">MicrosserviÃ§os com Spring Boot</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>Cada serviÃ§o Ã© <span class="highlight">independente e autÃ´nomo</span>, com seu prÃ³prio banco de dados, deploy e ciclo de vida. ComunicaÃ§Ã£o via REST, Kafka ou gRPC.</p>
                </div>

                <h3>ğŸ“‚ Estrutura Multi-ServiÃ§o Completa</h3>
                <div class="tree-structure">
                    <pre>
<span class="tree-folder">microservices-ecosystem/</span>
â”‚
â”œâ”€â”€ <span class="tree-folder">order-service/</span>                    <span class="tree-comment">// ServiÃ§o de Pedidos</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/order
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java           <span class="tree-comment">// Entidade de domÃ­nio</span>
â”‚   â”‚   â”‚   â””â”€â”€ OrderItem.java       <span class="tree-comment">// Value Object</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ application
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateOrderUseCase.java <span class="tree-comment">// Caso de uso</span>
â”‚   â”‚   â”‚   â””â”€â”€ CancelOrderUseCase.java <span class="tree-comment">// LÃ³gica de aplicaÃ§Ã£o</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java <span class="tree-comment">// @RestController - API REST</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderEventListener.java <span class="tree-comment">// @KafkaListener - Eventos</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderRepository.java <span class="tree-comment">// JPA Repository</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentClient.java   <span class="tree-comment">// @FeignClient - Chama payment-service</span>
â”‚   â”‚   â”‚       â””â”€â”€ InventoryClient.java <span class="tree-comment">// @FeignClient - Chama inventory-service</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â”œâ”€â”€ KafkaConfig.java         <span class="tree-comment">// ConfiguraÃ§Ã£o Kafka</span>
â”‚   â”‚       â”œâ”€â”€ FeignConfig.java         <span class="tree-comment">// ConfiguraÃ§Ã£o Feign Client</span>
â”‚   â”‚       â””â”€â”€ SecurityConfig.java      <span class="tree-comment">// SeguranÃ§a do serviÃ§o</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ src/main/resources
â”‚   â”‚   â”œâ”€â”€ application.yml              <span class="tree-comment">// ConfiguraÃ§Ãµes do serviÃ§o</span>
â”‚   â”‚   â””â”€â”€ application-prod.yml         <span class="tree-comment">// Profile produÃ§Ã£o</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile                       <span class="tree-comment">// ContainerizaÃ§Ã£o</span>
â”‚   â””â”€â”€ pom.xml                          <span class="tree-comment">// DependÃªncias Maven</span>
â”‚
â”œâ”€â”€ <span class="tree-folder">payment-service/</span>                 <span class="tree-comment">// ServiÃ§o de Pagamento</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/payment
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ Payment.java             <span class="tree-comment">// Entidade de pagamento</span>
â”‚   â”‚   â”‚   â””â”€â”€ PaymentStatus.java       <span class="tree-comment">// Enum de status</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ application
â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessPaymentUseCase.java <span class="tree-comment">// Processar pagamento</span>
â”‚   â”‚   â”‚   â””â”€â”€ RefundPaymentUseCase.java  <span class="tree-comment">// Estorno</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentController.java <span class="tree-comment">// @RestController - API REST</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentEventListener.java <span class="tree-comment">// Eventos de pedido</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentRepository.java <span class="tree-comment">// JPA Repository</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ StripeGateway.java     <span class="tree-comment">// Gateway Stripe</span>
â”‚   â”‚   â”‚       â””â”€â”€ OrderEventPublisher.java <span class="tree-comment">// Publica eventos de pagamento</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â”œâ”€â”€ KafkaConfig.java           <span class="tree-comment">// ConfiguraÃ§Ã£o Kafka</span>
â”‚   â”‚       â””â”€â”€ StripeConfig.java          <span class="tree-comment">// ConfiguraÃ§Ã£o Stripe</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">inventory-service/</span>               <span class="tree-comment">// ServiÃ§o de Estoque</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/inventory
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ Inventory.java           <span class="tree-comment">// Entidade de estoque</span>
â”‚   â”‚   â”‚   â””â”€â”€ Product.java             <span class="tree-comment">// Produto</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ application
â”‚   â”‚   â”‚   â”œâ”€â”€ ReserveStockUseCase.java <span class="tree-comment">// Reservar estoque</span>
â”‚   â”‚   â”‚   â””â”€â”€ ReleaseStockUseCase.java <span class="tree-comment">// Liberar estoque</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ InventoryController.java <span class="tree-comment">// @RestController - API REST</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OrderEventListener.java  <span class="tree-comment">// Escuta eventos de pedido</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ InventoryRepository.java <span class="tree-comment">// JPA Repository</span>
â”‚   â”‚   â”‚       â””â”€â”€ StockEventPublisher.java <span class="tree-comment">// Publica eventos de estoque</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java             <span class="tree-comment">// ConfiguraÃ§Ã£o Kafka</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">notification-service/</span>            <span class="tree-comment">// ServiÃ§o de NotificaÃ§Ã£o</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/notification
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ NotificationEventListener.java <span class="tree-comment">// @KafkaListener - Escuta todos eventos</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ EmailSender.java         <span class="tree-comment">// SendGrid/SMTP</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ SmsSender.java           <span class="tree-comment">// Twilio</span>
â”‚   â”‚   â”‚       â””â”€â”€ PushNotificationSender.java <span class="tree-comment">// Firebase</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â”œâ”€â”€ KafkaConfig.java             <span class="tree-comment">// ConfiguraÃ§Ã£o Kafka</span>
â”‚   â”‚       â””â”€â”€ EmailConfig.java             <span class="tree-comment">// ConfiguraÃ§Ã£o de email</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">api-gateway/</span>                     <span class="tree-comment">// Gateway de API (Spring Cloud Gateway)</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/gateway
â”‚   â”‚   â”œâ”€â”€ config
â”‚   â”‚   â”‚   â”œâ”€â”€ GatewayConfig.java           <span class="tree-comment">// @Configuration - Rotas do gateway</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java          <span class="tree-comment">// OAuth2/JWT</span>
â”‚   â”‚   â”‚   â””â”€â”€ CorsConfig.java              <span class="tree-comment">// ConfiguraÃ§Ã£o CORS</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ filter
â”‚   â”‚       â”œâ”€â”€ AuthenticationFilter.java    <span class="tree-comment">// Filtro de autenticaÃ§Ã£o</span>
â”‚   â”‚       â””â”€â”€ LoggingFilter.java           <span class="tree-comment">// Logging de requisiÃ§Ãµes</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ application.yml                      <span class="tree-comment">// Rotas e configuraÃ§Ãµes</span>
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">service-discovery/</span>               <span class="tree-comment">// Eureka Server (Service Registry)</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/eureka
â”‚   â”‚   â””â”€â”€ EurekaServerApplication.java     <span class="tree-comment">// @EnableEurekaServer</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ application.yml                      <span class="tree-comment">// ConfiguraÃ§Ã£o Eureka</span>
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">config-server/</span>                   <span class="tree-comment">// Spring Cloud Config Server</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/config
â”‚   â”‚   â””â”€â”€ ConfigServerApplication.java     <span class="tree-comment">// @EnableConfigServer</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">shared-library/</span>                  <span class="tree-comment">// Biblioteca compartilhada</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/shared
â”‚   â”‚   â”œâ”€â”€ event
â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEvent.java              <span class="tree-comment">// Eventos compartilhados</span>
â”‚   â”‚   â”‚   â””â”€â”€ PaymentEvent.java
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dto
â”‚   â”‚   â”‚   â””â”€â”€ ErrorResponse.java           <span class="tree-comment">// DTOs comuns</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ util
â”‚   â”‚       â””â”€â”€ DateUtil.java                <span class="tree-comment">// UtilitÃ¡rios compartilhados</span>
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">docker-compose.yml</span>               <span class="tree-comment">// OrquestraÃ§Ã£o local de todos serviÃ§os</span>
â”œâ”€â”€ <span class="tree-folder">kubernetes/</span>                      <span class="tree-comment">// Manifests Kubernetes</span>
â”‚   â”œâ”€â”€ order-service-deployment.yaml
â”‚   â”œâ”€â”€ payment-service-deployment.yaml
â”‚   â””â”€â”€ ingress.yaml
â”‚
â””â”€â”€ <span class="tree-folder">README.md</span>                        <span class="tree-comment">// DocumentaÃ§Ã£o do ecossistema</span>
                    </pre>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>ğŸ§  PrincÃ­pios Fundamentais</h4>
                        <ul>
                            <li><strong>Autonomia:</strong> Cada serviÃ§o Ã© independente</li>
                            <li><strong>Banco prÃ³prio:</strong> Database per service</li>
                            <li><strong>Deploy independente:</strong> CI/CD separado</li>
                            <li><strong>ComunicaÃ§Ã£o:</strong> REST + Kafka</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h4>ğŸ“„ Componentes Essenciais</h4>
                        <ul>
                            <li>API Gateway (roteamento)</li>
                            <li>Service Discovery (Eureka)</li>
                            <li>Config Server (configuraÃ§Ãµes)</li>
                            <li>Message Broker (Kafka)</li>
                            <li>Observabilidade (Prometheus/Grafana)</li>
                        </ul>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens</h4>
                        <ul>
                            <li>Escalabilidade independente</li>
                            <li>Times autÃ´nomos</li>
                            <li>Tecnologias diferentes por serviÃ§o</li>
                            <li>Deploy independente</li>
                            <li>Falhas isoladas</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Complexidade operacional alta</li>
                            <li>Observabilidade obrigatÃ³ria</li>
                            <li>TransaÃ§Ãµes distribuÃ­das complexas</li>
                            <li>LatÃªncia de rede</li>
                            <li>Debugging difÃ­cil</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li>Sistemas grandes com mÃºltiplos times</li>
                        <li>Necessidade de escalar componentes especÃ­ficos</li>
                        <li>Diferentes tecnologias por contexto</li>
                        <li>Deploy frequente e independente</li>
                        <li>Quando o monolito nÃ£o atende mais</li>
                    </ul>
                </div>
            </div>

            <!-- ARQUITETURA 7 -->
            <div class="architecture-section">
                <div class="arch-header">
                    <div class="arch-number">7</div>
                    <h2 class="arch-title">Saga Pattern (TransaÃ§Ãµes DistribuÃ­das)</h2>
                </div>

                <div class="concept">
                    <h3>ğŸ“Œ Conceito</h3>
                    <p>O <span class="highlight">Saga Pattern</span> coordena transaÃ§Ãµes distribuÃ­das em microsserviÃ§os, garantindo consistÃªncia eventual. Existem dois tipos: <strong>Orquestrada</strong> (com coordenador central) e <strong>Coreografada</strong> (reaÃ§Ã£o a eventos).</p>
                </div>

                <h3>ğŸ” Saga Orquestrada</h3>
                <div class="tree-structure">
                    <pre>
<span class="tree-folder">orchestrated-saga/</span>
â”‚
â”œâ”€â”€ <span class="tree-folder">orchestrator-service/</span>           <span class="tree-comment">// Coordenador Central</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/orchestrator
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ saga
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderSaga.java       <span class="tree-comment">// DefiniÃ§Ã£o da saga</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SagaState.java       <span class="tree-comment">// Estado da saga (enum)</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SagaStep.java        <span class="tree-comment">// Passo da saga</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ event
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderCreatedEvent.java <span class="tree-comment">// Eventos de entrada</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentProcessedEvent.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ InventoryReservedEvent.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ command
â”‚   â”‚   â”‚       â”œâ”€â”€ ProcessPaymentCommand.java <span class="tree-comment">// Comandos para serviÃ§os</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ ReserveInventoryCommand.java
â”‚   â”‚   â”‚       â””â”€â”€ CompensateOrderCommand.java <span class="tree-comment">// Comandos de compensaÃ§Ã£o</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ application
â”‚   â”‚   â”‚   â””â”€â”€ usecase
â”‚   â”‚   â”‚       â”œâ”€â”€ StartOrderSagaUseCase.java <span class="tree-comment">// Inicia saga</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ ProcessSagaStepUseCase.java <span class="tree-comment">// Processa passo</span>
â”‚   â”‚   â”‚       â””â”€â”€ CompensateSagaUseCase.java  <span class="tree-comment">// Compensa em caso de erro</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ kafka
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEventListener.java <span class="tree-comment">// @KafkaListener - Escuta eventos</span>
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentEventListener.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ InventoryEventListener.java
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rest
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ SagaController.java    <span class="tree-comment">// @RestController - Status da saga</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ kafka
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CommandPublisher.java  <span class="tree-comment">// Publica comandos para serviÃ§os</span>
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ dto
â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ PaymentCommandDTO.java
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ InventoryCommandDTO.java
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â””â”€â”€ persistence
â”‚   â”‚   â”‚           â”œâ”€â”€ SagaRepository.java    <span class="tree-comment">// JPA - Persiste estado da saga</span>
â”‚   â”‚   â”‚           â”œâ”€â”€ SagaEntity.java        <span class="tree-comment">// @Entity - Tabela de saga</span>
â”‚   â”‚   â”‚           â””â”€â”€ SagaStepEntity.java    <span class="tree-comment">// HistÃ³rico de passos</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â”œâ”€â”€ KafkaConfig.java               <span class="tree-comment">// ConfiguraÃ§Ã£o Kafka</span>
â”‚   â”‚       â””â”€â”€ SagaConfig.java                <span class="tree-comment">// ConfiguraÃ§Ã£o de saga</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">order-service/</span>                   <span class="tree-comment">// ServiÃ§o de Pedido (Participante)</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/order
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java       <span class="tree-comment">// @RestController - Cria pedido</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SagaCommandListener.java   <span class="tree-comment">// @KafkaListener - Escuta compensaÃ§Ãµes</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderRepository.java       <span class="tree-comment">// PersistÃªncia de pedido</span>
â”‚   â”‚   â”‚       â””â”€â”€ SagaEventPublisher.java    <span class="tree-comment">// Publica OrderCreatedEvent</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">payment-service/</span>                 <span class="tree-comment">// ServiÃ§o de Pagamento (Participante)</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/payment
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PaymentCommandListener.java <span class="tree-comment">// @KafkaListener - ProcessPaymentCommand</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentRepository.java      <span class="tree-comment">// PersistÃªncia</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentGateway.java         <span class="tree-comment">// Gateway externo</span>
â”‚   â”‚   â”‚       â””â”€â”€ PaymentEventPublisher.java  <span class="tree-comment">// PaymentProcessed/Failed</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â””â”€â”€ PaymentCompensation.java       <span class="tree-comment">// LÃ³gica de estorno</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â””â”€â”€ <span class="tree-folder">inventory-service/</span>               <span class="tree-comment">// ServiÃ§o de Estoque (Participante)</span>
    â”œâ”€â”€ src/main/java/com/example/inventory
    â”‚   â”œâ”€â”€ adapter
    â”‚   â”‚   â”œâ”€â”€ in
    â”‚   â”‚   â”‚   â””â”€â”€ InventoryCommandListener.java <span class="tree-comment">// @KafkaListener - ReserveInventoryCommand</span>
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ out
    â”‚   â”‚       â”œâ”€â”€ InventoryRepository.java       <span class="tree-comment">// PersistÃªncia</span>
    â”‚   â”‚       â””â”€â”€ InventoryEventPublisher.java   <span class="tree-comment">// InventoryReserved/Failed</span>
    â”‚   â”‚
    â”‚   â”œâ”€â”€ domain
    â”‚   â”‚   â””â”€â”€ InventoryCompensation.java        <span class="tree-comment">// LÃ³gica de liberaÃ§Ã£o</span>
    â”‚   â”‚
    â”‚   â””â”€â”€ config
    â”‚       â””â”€â”€ KafkaConfig.java
    â”‚
    â””â”€â”€ pom.xml
                    </pre>
                </div>

                <h3>ğŸ” Saga Coreografada</h3>
                <div class="tree-structure">
                    <pre>
<span class="tree-folder">choreographed-saga/</span>                  <span class="tree-comment">// Sem coordenador central</span>
â”‚
â”œâ”€â”€ <span class="tree-folder">order-service/</span>                   <span class="tree-comment">// Inicia a saga</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/order
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.java                     <span class="tree-comment">// Entidade de pedido</span>
â”‚   â”‚   â”‚   â””â”€â”€ OrderState.java                <span class="tree-comment">// Estado do pedido (PENDING, CONFIRMED, FAILED)</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderController.java       <span class="tree-comment">// @RestController - Cria pedido</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ listener
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentEventListener.java <span class="tree-comment">// Reage a PaymentSuccess/Failed</span>
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ InventoryEventListener.java <span class="tree-comment">// Reage a StockReserved/Failed</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ OrderRepository.java       <span class="tree-comment">// PersistÃªncia</span>
â”‚   â”‚   â”‚       â””â”€â”€ publisher
â”‚   â”‚   â”‚           â”œâ”€â”€ OrderCreatedPublisher.java <span class="tree-comment">// Publica: OrderCreated</span>
â”‚   â”‚   â”‚           â”œâ”€â”€ OrderConfirmedPublisher.java <span class="tree-comment">// Publica: OrderConfirmed</span>
â”‚   â”‚   â”‚           â””â”€â”€ OrderCancelledPublisher.java <span class="tree-comment">// Publica: OrderCancelled (compensaÃ§Ã£o)</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">payment-service/</span>                 <span class="tree-comment">// Reage a OrderCreated</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/payment
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â””â”€â”€ Payment.java                   <span class="tree-comment">// Entidade de pagamento</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ listener
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ OrderCreatedListener.java <span class="tree-comment">// @KafkaListener - Processa pagamento</span>
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderCancelledListener.java <span class="tree-comment">// Estorna pagamento</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentRepository.java     <span class="tree-comment">// PersistÃªncia</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentGateway.java        <span class="tree-comment">// Gateway de pagamento</span>
â”‚   â”‚   â”‚       â””â”€â”€ publisher
â”‚   â”‚   â”‚           â”œâ”€â”€ PaymentSuccessPublisher.java <span class="tree-comment">// Publica: PaymentSuccess</span>
â”‚   â”‚   â”‚           â””â”€â”€ PaymentFailedPublisher.java <span class="tree-comment">// Publica: PaymentFailed</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ <span class="tree-folder">inventory-service/</span>               <span class="tree-comment">// Reage a PaymentSuccess</span>
â”‚   â”œâ”€â”€ src/main/java/com/example/inventory
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â””â”€â”€ Inventory.java                 <span class="tree-comment">// Entidade de estoque</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ adapter
â”‚   â”‚   â”‚   â”œâ”€â”€ in
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ listener
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ PaymentSuccessListener.java <span class="tree-comment">// @KafkaListener - Reserva estoque</span>
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ OrderCancelledListener.java <span class="tree-comment">// Libera estoque</span>
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ out
â”‚   â”‚   â”‚       â”œâ”€â”€ InventoryRepository.java   <span class="tree-comment">// PersistÃªncia</span>
â”‚   â”‚   â”‚       â””â”€â”€ publisher
â”‚   â”‚   â”‚           â”œâ”€â”€ StockReservedPublisher.java <span class="tree-comment">// Publica: StockReserved</span>
â”‚   â”‚   â”‚           â””â”€â”€ StockFailedPublisher.java <span class="tree-comment">// Publica: StockFailed</span>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config
â”‚   â”‚       â””â”€â”€ KafkaConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ pom.xml
â”‚
â””â”€â”€ <span class="tree-folder">notification-service/</span>            <span class="tree-comment">// Notifica o cliente</span>
    â”œâ”€â”€ src/main/java/com/example/notification
    â”‚   â”œâ”€â”€ adapter
    â”‚   â”‚   â”œâ”€â”€ in
    â”‚   â”‚   â”‚   â””â”€â”€ listener
    â”‚   â”‚   â”‚       â”œâ”€â”€ OrderConfirmedListener.java <span class="tree-comment">// @KafkaListener - Notifica sucesso</span>
    â”‚   â”‚   â”‚       â””â”€â”€ OrderCancelledListener.java <span class="tree-comment">// Notifica falha</span>
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ out
    â”‚   â”‚       â”œâ”€â”€ EmailSender.java           <span class="tree-comment">// Envia email</span>
    â”‚   â”‚       â””â”€â”€ SmsSender.java             <span class="tree-comment">// Envia SMS</span>
    â”‚   â”‚
    â”‚   â””â”€â”€ config
    â”‚       â””â”€â”€ KafkaConfig.java
    â”‚
    â””â”€â”€ pom.xml
                    </pre>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <h4>ğŸ¯ Saga Orquestrada</h4>
                        <ul>
                            <li>Coordenador central controla o fluxo</li>
                            <li>FÃ¡cil rastreabilidade</li>
                            <li>Simples entender o fluxo</li>
                            <li>Ponto Ãºnico de controle</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h4>ğŸ¯ Saga Coreografada</h4>
                        <ul>
                            <li>ServiÃ§os reagem a eventos</li>
                            <li>Alto desacoplamento</li>
                            <li>Escalabilidade superior</li>
                            <li>Sem ponto Ãºnico de falha</li>
                        </ul>
                    </div>
                </div>

                <div class="pros-cons">
                    <div class="pros">
                        <h4>âœ… Vantagens do Saga Pattern</h4>
                        <ul>
                            <li>ConsistÃªncia eventual garantida</li>
                            <li>CompensaÃ§Ã£o automÃ¡tica de erros</li>
                            <li>Funciona com transaÃ§Ãµes distribuÃ­das</li>
                            <li>Cada serviÃ§o mantÃ©m autonomia</li>
                            <li>Rastreabilidade de transaÃ§Ãµes</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>âŒ Desvantagens</h4>
                        <ul>
                            <li>Complexidade de implementaÃ§Ã£o</li>
                            <li>DifÃ­cil debugar (coreografada)</li>
                            <li>Necessita observabilidade avanÃ§ada</li>
                            <li>Testes end-to-end complexos</li>
                            <li>IdempotÃªncia obrigatÃ³ria</li>
                        </ul>
                    </div>
                </div>

                <div class="when-use">
                    <h4>ğŸ¯ Quando Utilizar</h4>
                    <ul>
                        <li><strong>Orquestrada:</strong> Fluxos complexos com muitos passos, necessidade de controle centralizado</li>
                        <li><strong>Coreografada:</strong> Fluxos simples, times autÃ´nomos, alta escalabilidade</li>
                        <li>TransaÃ§Ãµes que envolvem mÃºltiplos microsserviÃ§os</li>
                        <li>Quando ACID distribuÃ­do nÃ£o Ã© possÃ­vel</li>
                        <li>E-commerce, reservas, processamento de pedidos</li>
                    </ul>
                </div>
            </div>

            <!-- TABELA COMPARATIVA FINAL -->
            <div class="architecture-section">
                <div class="arch-header">
                    <h2 class="arch-title">ğŸ ComparaÃ§Ã£o Final</h2>
                </div>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>CenÃ¡rio</th>
                            <th>Arquitetura Recomendada</th>
                            <th>Motivo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>CRUD simples</td>
                            <td><strong>Layered</strong></td>
                            <td>Simples, rÃ¡pido, atende bem</td>
                        </tr>
                        <tr>
                            <td>Web monolÃ­tico com views</td>
                            <td><strong>MVC</strong></td>
                            <td>Server-side rendering, SEO</td>
                        </tr>
                        <tr>
                            <td>Sistema mÃ©dio, features definidas</td>
                            <td><strong>Package by Feature</strong></td>
                            <td>Alta coesÃ£o, fÃ¡cil navegaÃ§Ã£o</td>
                        </tr>
                        <tr>
                            <td>Sistema com Kafka/Eventos</td>
                            <td><strong>Clean Architecture</strong></td>
                            <td>DomÃ­nio protegido, testÃ¡vel</td>
                        </tr>
                        <tr>
                            <td>MÃºltiplas integraÃ§Ãµes</td>
                            <td><strong>Hexagonal</strong></td>
                            <td>Adapters plugÃ¡veis, flexÃ­vel</td>
                        </tr>
                        <tr>
                            <td>Sistema grande, mÃºltiplos times</td>
                            <td><strong>MicrosserviÃ§os</strong></td>
                            <td>Autonomia, escalabilidade</td>
                        </tr>
                        <tr>
                            <td>TransaÃ§Ãµes distribuÃ­das</td>
                            <td><strong>Saga Pattern</strong></td>
                            <td>ConsistÃªncia eventual garantida</td>
                        </tr>
                    </tbody>
                </table>

                <div class="concept" style="margin-top: 40px;">
                    <h3>ğŸ“Œ Regra de Ouro</h3>
                    <p style="font-size: 1.2em; text-align: center;">
                        <strong>"Quanto maior e mais complexo o sistema, mais protegido deve ser o domÃ­nio."</strong>
                    </p>
                    <p style="text-align: center; margin-top: 15px;">
                        Comece simples (Layered/Feature) e evolua conforme a necessidade (Clean/Hexagonal/MicrosserviÃ§os).
                    </p>
                </div>
            </div>

        </div>

        <footer>
            <p><strong>Autor:</strong> Rafael</p>
            <p><strong>Stack:</strong> Java 21+ | Spring Boot 3+ | Kafka | MicrosserviÃ§os</p>
            <p style="margin-top: 15px; opacity: 0.8;">Â© 2026 - Guia Completo de Arquiteturas Java Spring Boot</p>
        </footer>
    </div>
</body>
</html>